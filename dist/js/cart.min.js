"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Cart=function(){function t(){_classCallCheck(this,t),this.$cartList=$(".prom_group"),this.init(),this.addEvent()}return _createClass(t,[{key:"init",value:function(){var t=window.localStorage;console.log(t),console.log(t.product.length);for(var e=0,n=t.length;e<n;e++){var a,i,r=t.key(e);r.startsWith("product_")&&(console.log(a),a=t.getItem(r)?t.getItem(r):"",i=this.convertStrToObj(a),this.$cartList.append('\n                div class="trow">\n                    <div class="checkbox">\n                        <input name="item" \n                            type="checkbox" \n                            data-shopgroup-id="1" value="'.concat(r,'">\n                    </div>\n                    <div class="product">\n                        <a href="//item.winxuan.com/1202507433" target="_blank">\n                            <img src="').concat(i.src,'"\n                                alt="').concat(i.name,'">\n                        </a>\n                        <a href="//item.winxuan.com/1202507433" target="_blank"\n                        title="').concat(i.name,'">').concat(i.name,'\n                        </a>\n                        <p class="red-hint"></p>\n                    </div>\n                    <div class="price">¥<em>').concat(i.price,'</em></div>\n                    <div class="credits">').concat(r,'</div>\n                    <div class="privilege"></div>\n                    <div class="quantity" data-min="1" data-good-id="').concat(r,'"\n                        data-max=" 18832 ">\n                        <a href="javascript:;" title="减少" class="reduce"\n                        data-id="1202507433">减少</a>\n                        <input name="quantity" value="').concat(i.num,'" data-value="1" \n                            data-id="1202507433">\n                        <a href="javascript:;" title="增加" class="increase"\n                        data-id="1202507433">增加</a>\n                    </div>\n\n                    <div class="operation" style="position: relative;">\n                        <a href="javascript:;" class="remove"\n                        data-id="1202507433">删除</a>\n                    </div>\n                </div>\n                ')))}}},{key:"addEvent",value:function(){$(".reduce").each(function(){$(this).click(function(){var t=window.localStorage,e=$(this).parents(".quantity").attr("data-good-id"),n=t.getItem(key)?t.getItem(key):"",n=this.convertStrToObj(n);1<n[e].num&&n[e].num--,t.setItem("books",JSON.stringify(storage_obj)),$(this).next().val(n[e].num),$(this).parent().prev().text(n[e].price*n[e].num)})}),$(".increase").each(function(){$(this).click(function(){var t=window.localStorage,e=$(this).parents(".quantity").attr("data-good-id"),t=t.getItem(key)?t.getItem(key):"",t=this.convertStrToObj(t);t[e].num++,$.cookie("products",JSON.stringify(cookie_obj),{expires:7,path:"/"}),$(this).prev().val(t[e].num),$(this).parent().prev().text(t[e].price*t[e].num)})}),$(".quantity>input").each(function(){$(this).blur(function(){var t=window.localStorage,e=$(this).parents(".quantity").attr("data-good-id"),n=t.getItem(key)?t.getItem(key):"",n=this.convertStrToObj(n),a=$(this).val();/^\d+$/.test(a)&&0<a?n[e].num=a:n[e].num=1,t.setItem("books",JSON.stringify(n)),$(this).val(n[e].num),$(this).parent().prev().text(n[e].price*n[e].num)})}),$(".remove").each(function(){$(this).click(function(){$(this).parents(".operation").prev().attr("data-good-id");var t=window.localStorage,e=t.getItem(key)?t.getItem(key):"",e=this.convertStrToObj(e);t.setItem("books",JSON.stringify(e)),$(this).parents(".trow").detach()})})}},{key:"convertStrToObj",value:function(t){return t?JSON.parse(t):{}}}]),t}();new Cart;