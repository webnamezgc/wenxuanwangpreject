"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Cart=function(){function t(){_classCallCheck(this,t),this.$cartList=$(".prom_group"),this.init(),this.addEvent()}return _createClass(t,[{key:"init",value:function(){for(var t=window.localStorage,e=0,n=t.length;e<n;e++){var i=t.key(e);i.startsWith("product_")&&(i=t.getItem(i)?t.getItem(i):"",this.convertStrToObj(i),this.$cartList.append('\n                div class="trow">\n                    <div class="checkbox">\n                        <input name="item" \n                            type="checkbox" \n                            data-shopgroup-id="1" value="1202507433">\n                    </div>\n                    <div class="product">\n                        <a href="//item.winxuan.com/1202507433" target="_blank">\n                            <img src="https://img1.winxuancdn.com/8281/1202638281_49_2_original_800x800.jpg?26712000&imageMogr2/thumbnail/200x200"\n                                alt="活着">\n                        </a>\n                        <a href="//item.winxuan.com/1202507433" target="_blank"\n                        title="活着">活着\n                        </a>\n                        <p class="red-hint"></p>\n                    </div>\n                    <div class="price">¥<em>34.60</em></div>\n                    <div class="credits">346</div>\n                    <div class="privilege"></div>\n                        <div class="quantity" data-min="1"\n                            data-max=" 18832 ">\n                            <a href="javascript:;" title="减少" class="reduce"\n                            data-id="1202507433">减少</a>\n                            <input name="quantity" value="1" data-value="1" \n                                data-id="1202507433">\n                            <a href="javascript:;" title="增加" class="increase"\n                            data-id="1202507433">增加</a>\n                        </div>\n\n                    <div class="operation" style="position: relative;">\n                        <a href="javascript:;" class="remove"\n                        data-id="1202507433">删除</a>\n                    </div>\n                </div>\n                '))}}},{key:"addEvent",value:function(){$(".reduce").each(function(){$(this).click(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),e=$.cookie("products")?$.cookie("products"):"",e=convertStrToObj(e);1<e[t].num&&e[t].num--,$.cookie("products",JSON.stringify(e),{expires:7,path:"/"}),$(this).next().val(e[t].num),$(this).parent().next().text(e[t].price*e[t].num)})}),$(".increase").each(function(){$(this).click(function(){var t=$(this).parents(".goodInfo").attr("data-value"),e=$.cookie("products")?$.cookie("products"):"",e=convertStrToObj(e);e[t].num++,$.cookie("products",JSON.stringify(e),{expires:7,path:"/"}),$(this).prev().val(e[t].num),$(this).parent().next().text(e[t].price*e[t].num)})}),获取所有的数量框,$(".quantity>input").each(function(){$(this).blur(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),e=$.cookie("products")?$.cookie("products"):"",e=convertStrToObj(e),n=$(this).val();/^\d+$/.test(n)&&0<n?e[t].num=n:e[t].num=1,$.cookie("products",JSON.stringify(e),{expires:7,path:"/"}),$(this).val(e[t].num),$(this).parent().next().text(e[t].price*e[t].num)})}),$(".del").each(function(){$(this).click(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),e=$.cookie("products")?$.cookie("products"):"",e=convertStrToObj(e);delete e[t],$.cookie("products",JSON.stringify(e),{expires:7,path:"/"}),$(this).parents(".goodInfo").detach()})})}},{key:"convertStrToObj",value:function(t){return t?JSON.parse(t):{}}}]),t}();new Cart;