"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Form=function(){function e(){_classCallCheck(this,e),this.$phone=$(".phone"),this.$pclick=$(".phone_click"),this.$repass=$(".repass"),this.$rclick=$(".repass_click"),this.$action=$(".action"),this.$aclick=$(".action_click"),this.$step1=$(".step1"),this.$step2=$(".step2"),this.$step3=$(".step3"),this.$phoneinp=$("#phone"),this.$picture=$("#picture"),this.$note=$("#note"),this.$note_btn=$("#note_btn"),this.$check=$("#check"),this.flag=["false","false","false","false"],this.open=["false","false","false","false","false","false"],this.$next=$("#next"),this.$pass=$("#pass"),this.$restpass=$("#restpass"),this.$btn=$("#btn"),this.init(),this.addEvent()}return _createClass(e,[{key:"init",value:function(){this.$phone.css("color","red"),this.$pclick.css("background","red"),this.$step1.css("display","block")}},{key:"addEvent",value:function(){var t=this;$("#header img").on("click",function(){location.href="../index.html"}),$(function(){code_draw(),$(".a").on("click",function(){code_draw()})}),this.$phoneinp.on("blur",function(){var e=t.$phoneinp.val();/^1(1|2|3|4|5|6|7|8|9)\d{9}$/.test(e)?($(".inp_iteam>span").eq(0).css("color","green"),$(".inp_iteam>span").eq(0).html("输入正确"),t.flag[0]="true",t.open[0]="true"):($(".inp_iteam>span").eq(0).css("color",""),$(".inp_iteam>span").eq(0).html("请输入手机号"))}),this.$picture.on("blur",function(){var e=$(".input-val").val().toLowerCase(),s=$("#canvas").attr("data-code");""==e?($(".inp_iteam>span").eq(1).css("color",""),$(".inp_iteam>span").eq(1).html("请输入验证码")):e==s?($(".inp_iteam>span").eq(1).css("color","green"),$(".inp_iteam>span").eq(1).html("输入正确"),$(".input-val").val(""),t.flag[1]="true",t.open[1]="true"):($(".inp_iteam>span").eq(1).html("验证码错误！请重新输入！"),$(".input-val").val(""))}),this.$note_btn.on("click",function(){var e=t.$note.val();/^\w{6}$/.test(e)?($(".inp_iteam>span").eq(2).css("color","green"),$(".inp_iteam>span").eq(2).html("输入正确"),t.flag[2]="true",t.open[2]="true"):($(".inp_iteam>span").eq(2).css("color",""),$(".inp_iteam>span").eq(2).html("请输入短信验证码"))}),this.$check.on("click",function(){t.flag[3]="true",t.open[3]="true"}),this.$next.on("click",function(){-1===t.flag.indexOf("false")&&(t.$step1.css("display",""),t.$step2.css("display","block"),t.$phone.css("color",""),t.$pclick.css("background",""),t.$repass.css("color","red"),t.$rclick.css("background","red"))}),this.$pass.on("blur",function(){var e=t.$pass.val();/^\w{6,12}$/.test(e)?($(".inp_iteam>span").eq(3).css("color","green"),$(".inp_iteam>span").eq(3).html("输入正确"),t.open[4]="true"):($(".inp_iteam>span").eq(3).css("color",""),$(".inp_iteam>span").eq(3).html("请输入密码"))}),this.$restpass.on("blur",function(){t.$restpass.val()===t.$pass.val()?($(".inp_iteam>span").eq(4).css("color","green"),$(".inp_iteam>span").eq(4).html("输入正确"),t.open[5]="true"):($(".inp_iteam>span").eq(4).css("color",""),$(".inp_iteam>span").eq(4).html("请输入密码"))}),this.$btn.on("click",function(){-1===t.open.indexOf("false")&&(t.$step2.css("display",""),t.$step3.css("display","block"),t.$repass.css("color",""),t.$rclick.css("background",""),t.$action.css("color","red"),t.$aclick.css("background","red"),t.setTime())})}},{key:"setTime",value:function(){var i=this;setInterval(function(){var e=$(".num").html();--e,$(".num").html(e),setTimeout(function(){var e=$.cookie("wenxuanpreject")?$.cookie("wenxuanpreject"):"",s=(console.log(e),convertStrToObj(e)),t=i.$phoneinp.val(),n=i.$pass.val();s[t]=n,e=JSON.stringify(s),$.cookie("wenxuanpreject",e,{expires:10,path:"/"}),console.log(s),location.href="./login.html"},5500)},1e3)}}]),e}();new Form;